<% content_for(:page_title) { "Rails Example: Shop" } %>

<section id="shop">
  <h2>Going skiing?</h2>
  <p>Stock up here.</p>
  <%= image_tag("skis.jpg", class: "product-img") %>
  <hr/>

  <%= render "shared/shopping_basket" %>

  <hr/>
  <div class="products">
    <% @products.map do |item, details| %>

    <%# All items going to blue skis path currently! %>
    <span class="shop-item">
      <%= link_to "#{details["title"]}<br/>#{details["display_price"]}".html_safe,
        product_path(details["path"])
      %>
      <%= button_to "Add to basket", shop_all_products_path, remote:true, method: :get, class: "basket-add", data: { price: details[:price] } %>
    </span>
    <% end %>
  </div>
</section>
